!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.sheet_form=e("#gswpts_create_table"),this.sheet_details=e("#sheet_details"),this.sheet_container=e("#spreadsheet_container")}var n,a;return n=t,(a=[{key:"call_alert",value:function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bottom-right";$.suiAlert({title:e,description:t,type:n,time:a,position:r})}},{key:"html_loader",value:function(){return'\n               <div class="ui segment gswpts_table_loader">\n                        <div class="ui active inverted dimmer">\n                            <div class="ui large text loader">Loading</div>\n                        </div>\n                        <p></p>\n                        <p></p>\n                        <p></p>\n                </div>\n            '}},{key:"sheet_details_html",value:function(e){return'\n                <div id="sheet_ui_card" class="ui card" style="width: 60%; min-width: 400px;">\n                    <div class="content">\n                        <div class="row">\n                            <div class="col-12 d-flex align-items-center justify-content-start mb-3">\n                                <h4 class="m-0">Sheet Name: </h4>\n                                <h5 class="m-0 ml-2">'.concat(e.sheet_data.sheet_name,'</h5>\n                            </div>\n                            <div class="col-12 d-flex align-items-center justify-content-start mb-3">\n                                <h4 class="m-0">Total Rows: </h4>\n                                <h5 class="m-0 ml-2">').concat(e.sheet_data.total_rows,'</h5>\n                            </div>\n                            <div class="col-12 d-flex align-items-center justify-content-start mb-3">\n                                <h4 class="m-0">Total Result: </h4>\n                                <h5 class="m-0 ml-2">').concat(e.sheet_data.sheet_total_result,'</h5>\n                            </div>\n                            <div class="col-12 d-flex align-items-center justify-content-start">\n                                <h4 class="m-0">Author Mail: </h4>\n                                <h5 class="m-0 ml-2">').concat(e.sheet_data.author_info[0].email.$t,'</h5>\n                            </div>\n                            <div id="shortcode_container" style="display: none !important;" class="col-12 d-flex mt-3 align-items-center justify-content-start transition hidden">\n                                <h4 class="m-0">Table Shortcode: </h4>\n                                <h5 class="m-0 ml-2">\n                                    <div class="ui action input">\n                                        <input id="sortcode_value" type="text" class="copyInput" value="">\n                                        <button id="sortcode_copy" type="button" name="copyToken" value="copy" class="copyToken ui right icon button">\n                                            <i class="clone icon"></i>\n                                        </button>\n                                    </div>\n                                </h5>\n                            </div>\n                        </div>\n                    </div>\n            </div>\n            ')}},{key:"show_shortcode",value:function(e){$("#shortcode_container").removeAttr("style"),$("#shortcode_container").transition("scale"),$("#sortcode_value").val("[gswpts_table id=".concat(e,"]"))}},{key:"btn_changer",value:function(e,t,n){e.html("\n                            ".concat(t,"\n                        ")),e.attr("req-type",n)}},{key:"get_slug_parameter",value:function(e){var t=new URL(window.location);return new URLSearchParams(t.search).get(e)||!1}},{key:"export_to_json",value:function(e,t){t.tableHTMLExport({type:"json",filename:"sample.json"})}},{key:"export_to_csv",value:function(e,t){t.tableHTMLExport({type:"csv",filename:"sample.csv"})}},{key:"export_to_pdf",value:function(e,t){t.tableHTMLExport({type:"pdf",filename:"sample.pdf"})}},{key:"table_settings_obj",value:function(){return{table_title:$("#show_title").prop("checked"),defaultRowsPerPage:"all"==$("#rows_per_page").val()?-1:$("#rows_per_page").val(),showInfoBlock:$("#info_block").prop("checked"),responsiveTable:$("#responsive").prop("checked"),showXEntries:$("#show_entries").prop("checked"),swapFilterInputs:$("#swap_filter_inputs").prop("checked"),swapBottomOptions:$("#swap_bottom_options").prop("checked"),allowSorting:$("#sorting").prop("checked"),searchBar:$("#search_table").prop("checked"),tableExport:$("#table_exporting").val()}}},{key:"default_settings",value:function(){return{table_title:!1,defaultRowsPerPage:10,showInfoBlock:!0,responsiveTable:!1,showXEntries:!0,swapFilterInputs:!1,swapBottomOptions:!1,allowSorting:!0,searchBar:!0,tableExport:null}}},{key:"table_object",value:function(e,t,n){return{dom:'B<"#filtering_input"lf>rt<"#bottom_options"ip>',buttons:[{text:"JSON { }",className:"ui inverted yellow button transition hidden json_btn",action:function(t,n,a,r){var o=n.buttons.exportData();$.fn.dataTable.fileSave(new Blob([JSON.stringify(o)]),"".concat(e,".json"))}},{text:'PDF &nbsp;<i class="fas fa-file-pdf"></i>',extend:"pdf",className:"ui inverted red button transition hidden pdf_btn",title:"".concat(e)},{text:'CSV &nbsp; <i class="fas fa-file-csv"></i>',extend:"csv",className:"ui inverted green button transition hidden csv_btn",title:"".concat(e)},{text:'Excel &nbsp; <i class="fas fa-file-excel"></i>',extend:"excel",className:"ui inverted green button transition hidden excel_btn",title:"".concat(e)},{text:'Print &nbsp; <i class="fas fa-print"></i>',extend:"print",className:"ui inverted secondary button transition hidden print_btn",title:"".concat(e)},{text:'Copy &nbsp; <i class="fas fa-copy"></i>',extend:"copy",className:"ui inverted violet button transition hidden copy_btn",title:"".concat(e)}],order:[],responsive:!0,lengthMenu:[[1,5,10,15,25,50,100,-1],[1,5,10,15,25,50,100,"All"]],pageLength:t,ordering:n}}}])&&e(n.prototype,a),t}();function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}jQuery(document).ready((function(e){new(function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(p,t);var n,i,c,l,u=(c=p,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s(c);if(l){var n=s(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return o(this,e)});function p(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=u.call(this,e)).fetch_and_save_button=e("#fetch_save_btn"),t.sheet_url="",t.dropdown_select=e("#table_type"),t.events(),e("#table_type").dropdown(),t}return n=p,(i=[{key:"events",value:function(){var t=this;this.dropdown_select.on("change",(function(e){t.show_fetch_btn(e),t.show_hidden_input(e)})),this.fetch_and_save_button.on("click",(function(e){t.handle_submit(e)})),e(document).on("click","#sortcode_copy",(function(e){t.copy_shorcode(e)})),e(document).on("click","#create_button",(function(e){t.clear_fields()})),e(".edit_table_name").on("click",(function(e){t.edit_table_name(e)}))}},{key:"edit_table_name",value:function(t){e(t.currentTarget).siblings("input").select()}},{key:"show_fetch_btn",value:function(t){e(t.currentTarget).find("input[name=source_type]").val()&&e("#fetch_save_btn").hasClass("hidden")&&e("#fetch_save_btn").transition("scale")}},{key:"show_hidden_input",value:function(t){"spreadsheet"==e(t.currentTarget).find("input[name=source_type]").val()&&(this.show_file_input(),e(".browse_input").hasClass("visible")&&e(".browse_input").transition("scale")),"csv"==e(t.currentTarget).find("input[name=source_type]").val()&&(this.show_file_input(),this.show_browser_input())}},{key:"show_file_input",value:function(){e(".file_input").hasClass("hidden")&&e(".file_input").transition("scale")}},{key:"show_browser_input",value:function(){e(".browse_input").hasClass("hidden")&&e(".browse_input").transition("scale")}},{key:"handle_submit",value:function(t){var n=this;t.preventDefault();var a=e(t.currentTarget),r=e("#table_name").val(),o=this.sheet_form.serialize();""!=this.sheet_form.find("input[name=file_input]").val()?this.sheet_url!=this.sheet_form.find("input[name=file_input]").val()?e.ajax({url:file_url.admin_ajax,data:{action:"gswpts_sheet_create",form_data:o,table_name:r,type:a.attr("req-type")},type:"post",beforeSend:function(){"fetch"==a.attr("req-type")?(n.btn_changer(a,'\n                            Fetching Data &nbsp;\n                            <div class="ui active mini inline loader"></div>\n                        ',"fetch"),n.sheet_container.html(n.html_loader)):("saved"==a.attr("req-type")&&e("#shortcode_container").transition("scale"),n.btn_changer(a,'\n                                Saving Table &nbsp;\n                                <div class="ui active mini inline loader"></div>\n                            ',"save"))},success:function(e){if(console.log(e),"invalid_action"!=JSON.parse(e).response_type&&"invalid_request"!=JSON.parse(e).response_type||(n.call_alert("Error &#128683;",JSON.parse(e).output,"error",4),n.btn_changer(a,"Fetch Data","fetch"),n.clear_fields(),n.sheet_container.html("")),"empty_field"==JSON.parse(e).response_type&&(n.call_alert("Warning &#9888;&#65039;",JSON.parse(e).output,"warning",3),n.btn_changer(a,"Fetch Data","fetch"),n.sheet_container.html("")),"success"==JSON.parse(e).response_type&&(n.sheet_details.addClass("mt-4 p-0"),n.sheet_details.html(n.sheet_details_html(JSON.parse(e))),n.sheet_details.transition("scale"),n.sheet_container.parent().removeClass("mt-4").addClass("mt-3"),n.sheet_container.html(JSON.parse(e).output)),"saved"==JSON.parse(e).response_type){n.btn_changer(a,"Table Saved","saved"),n.call_alert("Successfull &#128077;",JSON.parse(e).output,"success",3);var t=Object.values(JSON.parse(e).id)[0];n.show_shortcode(t),n.sheet_url=JSON.parse(e).sheet_url,n.show_create_btn(),n.push_parameter(t)}"sheet_exists"==JSON.parse(e).response_type&&(n.call_alert("Warning &#9888;&#65039;",JSON.parse(e).output,"warning",3),n.btn_changer(a,"Save Table","save"))},complete:function(t){if("success"==JSON.parse(t.responseText).response_type){var r=e("#table_name").val();e("#create_tables").DataTable({dom:'B<"#filtering_input"lf>rt<"#bottom_options"ip>',buttons:[{text:"JSON { }",className:"ui inverted yellow button",action:function(t,n,a,o){var s=n.buttons.exportData();e.fn.dataTable.fileSave(new Blob([JSON.stringify(s)]),"".concat(r,".json"))}},{text:'PDF &nbsp;<i class="fas fa-file-pdf"></i>',extend:"pdf",className:"ui inverted red button",title:"".concat(r)},{text:'CSV &nbsp; <i class="fas fa-file-csv"></i>',extend:"csv",className:"ui inverted green button",title:"".concat(r)},{text:'Excel &nbsp; <i class="fas fa-file-excel"></i>',extend:"excel",className:"ui inverted green button",title:"".concat(r)},{text:'Print &nbsp; <i class="fas fa-print"></i>',extend:"print",className:"ui inverted secondary button",title:"".concat(r)},{text:'Copy &nbsp; <i class="fas fa-copy"></i>',extend:"copy",className:"ui inverted violet button",title:"".concat(r)}],order:[],responsive:!0,lengthMenu:[[1,5,10,15,25,50,100,-1],[1,5,10,15,25,50,100,"All"]],pageLength:10}),n.btn_changer(a,"Save Table","save"),setTimeout((function(){n.call_alert("Successfull &#128077;","<b>Google Sheet data fetched successfully</b>","success",3)}),700)}},error:function(e){n.call_alert("Error &#128683;","<b>Something went wrong</b>","error",3),n.btn_changer(a,"Fetch Data","fetch"),n.sheet_container.html("")}}):this.call_alert("Warning &#9888;&#65039;","<b>This SpreadSheet already exists. Try new one</b>","warning",3):this.call_alert("Warning &#9888;&#65039;","<b>Form field is empty. Please fill out the field</b>","warning",3)}},{key:"copy_shorcode",value:function(t){var n=e(t.currentTarget).siblings("input");n.focus(),n.select(),document.execCommand("copy"),this.call_alert("Copied &#128077;","Sortcode copied successfully","info",2)}},{key:"show_create_btn",value:function(){e("#create_button").hasClass("visible")||e("#create_button").transition("scale")}},{key:"clear_fields",value:function(){var t=this;this.sheet_form.find("input[name=file_input]").val(""),e(".edit_table_name").attr("disabled",!1),e("#table_name").val(""),e("#table_name").attr("disabled",!1),e("#tab1").prop("checked",!0),e("#sheet_ui_card").transition("scale"),e("#create_tables_wrapper").transition("scale"),this.btn_changer(this.fetch_and_save_button,"Fetch Data","fetch"),setTimeout((function(){t.sheet_details.transition("scale"),e("#sheet_ui_card").remove(),e("#create_tables_wrapper").remove()}),300)}},{key:"push_parameter",value:function(e){var t=new URL(window.location);t.searchParams.set("id",e),window.history.pushState({},"",t)}}])&&a(n.prototype,i),p}(t))})),jQuery(document).ready((function(e){new(function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,t);var n,a,r,o,s=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(o){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return u(this,e)});function i(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=s.call(this,e)).events(),t}return n=i,(a=[{key:"events",value:function(){this.fetch_data_by_id()}},{key:"fetch_data_by_id",value:function(){var t=this;this.get_slug_parameter("id")&&e.ajax({url:file_url.admin_ajax,data:{action:"gswpts_sheet_fetch",id:this.get_slug_parameter("id")},type:"post",success:function(n){console.log(n),"invalid_action"!=JSON.parse(n).response_type&&"invalid_request"!=JSON.parse(n).response_type||(t.sheet_container.html(""),t.call_alert("Error &#128683;",JSON.parse(n).output,"error",4)),"success"==JSON.parse(n).response_type&&(t.sheet_details.addClass("mt-4 p-0"),setTimeout((function(){e(".edit_table_name").siblings("input[name=table_name]").val(JSON.parse(n).table_data.table_name),e(".edit_table_name").parent().transition("fade up"),e("#table_type").dropdown("set selected",JSON.parse(n).table_data.source_type),t.sheet_form.find("input[name=file_input]").val(JSON.parse(n).table_data.source_url),t.sheet_details.html(t.sheet_details_html(JSON.parse(n))),t.sheet_details.transition("scale"),t.show_shortcode(t.get_slug_parameter("id"))}),400),t.sheet_container.html(JSON.parse(n).output))},error:function(e){t.call_alert("Error &#128683;","<b>Something went wrong</b>","error",3),t.sheet_container.html("")},complete:function(n){"success"==JSON.parse(n.responseText).response_type&&(e("#create_tables").DataTable({dom:'B<"#filtering_input"lf>rt<"#bottom_options"ip>',buttons:[{text:"JSON { }",className:"ui inverted yellow button transition hidden json_btn",action:function(t,a,r,o){var s=a.buttons.exportData();e.fn.dataTable.fileSave(new Blob([JSON.stringify(s)]),"".concat(JSON.parse(n.responseText).table_data.table_name,".json"))}},{text:'PDF &nbsp;<i class="fas fa-file-pdf"></i>',extend:"pdf",className:"ui inverted red button transition hidden pdf_btn",title:"".concat(JSON.parse(n.responseText).table_data.table_name)},{text:'CSV &nbsp; <i class="fas fa-file-csv"></i>',extend:"csv",className:"ui inverted green button transition hidden csv_btn",title:"".concat(JSON.parse(n.responseText).table_data.table_name)},{text:'Excel &nbsp; <i class="fas fa-file-excel"></i>',extend:"excel",className:"ui inverted green button transition hidden excel_btn",title:"".concat(JSON.parse(n.responseText).table_data.table_name)},{text:'Print &nbsp; <i class="fas fa-print"></i>',extend:"print",className:"ui inverted secondary button transition hidden print_btn",title:"".concat(JSON.parse(n.responseText).table_data.table_name)},{text:'Copy &nbsp; <i class="fas fa-copy"></i>',extend:"copy",className:"ui inverted violet button transition hidden copy_btn",title:"".concat(JSON.parse(n.responseText).table_data.table_name)}],order:[],responsive:!0,lengthMenu:[[1,5,10,15,25,50,100,-1],[1,5,10,15,25,50,100,"All"]],pageLength:10}),setTimeout((function(){t.call_alert("Successfull &#128077;","<b>Google Sheet data fetched successfully</b>","success",3)}),700))}})}}])&&c(n.prototype,a),i}(t))})),jQuery(document).ready((function(e){new(function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,t);var n,a,r,o,s=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function i(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=s.call(this,e)).table_container=e("#gswpts_tables_container"),t.checkbox_switcher=!1,t.events(),t}return n=i,(a=[{key:"events",value:function(){var t=this;this.fetch_data_by_page(),e(document).on("click",".gswpts_sortcode_copy",(function(e){t.copy_shorcode(e)})),e(document).on("click","#manage_tables_checkbox",(function(e){t.toggle_content(e)}))}},{key:"fetch_data_by_page",value:function(){var t=this;this.get_slug_parameter("page")&&"gswpts-tables"===this.get_slug_parameter("page")&&e.ajax({url:file_url.admin_ajax,data:{action:"gswpts_table_fetch",page_slug:this.get_slug_parameter("page")},type:"post",success:function(e){"invalid_action"!=JSON.parse(e).response_type&&"invalid_request"!=JSON.parse(e).response_type||(t.table_container.html(""),t.call_alert("Error &#128683;",JSON.parse(e).output,"error",4)),"success"==JSON.parse(e).response_type&&t.table_container.html(JSON.parse(e).output)},error:function(e){t.call_alert("Error &#128683;","<b>Something went wrong</b>","error",3),t.sheet_container.html("")},complete:function(n){"success"==JSON.parse(n.responseText).response_type&&(e("#manage_tables").DataTable({columnDefs:[{targets:[0,5,6],orderable:!1}],order:[]}),setTimeout((function(){"true"==JSON.parse(n.responseText).no_data?t.call_alert("Warning &#9888;&#65039;","<b>No tables found. Create a new</b>","warning",3):t.call_alert("Successfull &#128077;","<b>All SpreadSheet Tables Fetched Successfully</b>","success",3)}),700))}})}},{key:"copy_shorcode",value:function(t){var n=e(t.currentTarget).siblings("input");n.attr("type","text"),n.focus(),n.select(),document.execCommand("copy"),n.attr("type","hidden"),this.call_alert("Copied &#128077;","Sortcode copied successfully","info",2)}},{key:"toggle_content",value:function(t){console.log(e(t.currentTarget).attr("data-show")),"false"==e(t.currentTarget).attr("data-show")&&(e("#delete_button").transition("scale"),this.check_all_checkbox(),this.checkbox_switcher=!0),"true"==e(t.currentTarget).attr("data-show")&&(e("#delete_button").transition("scale"),setTimeout((function(){}),300),this.uncheck_all_checkbox(),this.checkbox_switcher=!1),e(t.currentTarget).attr("data-show",""+this.checkbox_switcher)}},{key:"check_all_checkbox",value:function(){e(".manage_tables_checkbox").prop("checked",!0)}},{key:"uncheck_all_checkbox",value:function(){e(".manage_tables_checkbox").prop("checked",!1)}}])&&_(n.prototype,a),i}(t))})),jQuery(document).ready((function(e){new(function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(i,t);var n,a,r,o,s=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function i(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=s.call(this,e)).updateCheck=!1,t.deleteBtn=e("#delete_button"),t.events(),t}return n=i,(a=[{key:"events",value:function(){var t=this;e(document).on("click",".gswpts_edit_table",(function(e){t.edit_table_name(e)})),e(document).on("click",".gswpts_popup_edit",(function(e){t.edit_tag_value(e)})),e(document).on("click",".gswpts_table_update_btn",(function(e){t.update_table_name(e)})),e(document).on("click",".gswpts_table_delete_btn",(function(e){t.delete_table(e)})),this.deleteBtn.on("click",(function(e){t.delete_all_table(e)}))}},{key:"update_table_name",value:function(t){var n=e(t.currentTarget).parent().parent().find(".table_name").text();if(0!=this.updateCheck){var a={reqType:"update",table_id:e(t.currentTarget).attr("id"),table_name:n};this.ajax_request(a,t)}else this.call_alert("Warning &#9888;&#65039;","<b>Table name haven't changed to update</b>","warning",3)}},{key:"delete_table",value:function(t){var n={reqType:"delete",table_id:e(t.currentTarget).attr("id")};this.ajax_request(n,t)}},{key:"delete_all_table",value:function(t){var n=e("input[name='manage_tables_checkbox']:checked"),a={reqType:"deleteAll"},r=[];e.each(n,(function(t,n){r.push(e(n).val())})),a.table_ids=r,a.table_ids.length>0?confirm("Are you sure you want to delete selected tables ?")&&this.ajax_request(a,t):this.call_alert("Warning &#9888;&#65039;","<b>No table is selected to delete</b>","warning",3)}},{key:"ajax_request",value:function(t,n){var a=this,r=e(n.currentTarget);e.ajax({url:file_url.admin_ajax,data:{action:"gswpts_ud_table",data:t},type:"post",beforeSend:function(){"update"==t.reqType&&e(n.currentTarget).html('\n                        Updating &nbsp;\n                        <div class="ui active mini inline loader"></div>\n                    '),"delete"==t.reqType&&e(n.currentTarget).html('\n                        Deleting &nbsp;\n                        <div class="ui active mini inline loader"></div>\n                    '),"deleteAll"==t.reqType&&e(n.currentTarget).html('\n                        Deleting &nbsp;\n                        <div class="ui active mini inline loader"></div>\n                    ')},success:function(e){console.log(e),"invalid_action"!=JSON.parse(e).response_type&&"invalid_request"!=JSON.parse(e).response_type||a.call_alert("Error &#128683;",JSON.parse(e).output,"error",4),"updated"==JSON.parse(e).response_type&&(r.html("Update"),a.call_alert("Successfull &#128077;",JSON.parse(e).output,"success",3),a.updateCheck=!1),"deleted"==JSON.parse(e).response_type&&(r.html("Deleted"),r.parent().parent().transition("fade"),a.call_alert("Successfull &#128077;",JSON.parse(e).output,"success",3)),"deleted_All"==JSON.parse(e).response_type&&(a.remove_seleted_tables(),r.html("Delete Selected"),a.call_alert("Successfull &#128077;",JSON.parse(e).output,"success",3))},error:function(e){a.call_alert("Error &#128683;","<b>Something went wrong</b>","error",3)}})}},{key:"remove_seleted_tables",value:function(){var t=e("input[name='manage_tables_checkbox']:checked");e.each(t,(function(t,n){e(n).parent().parent().transition("fade")})),setTimeout((function(){e.each(t,(function(t,n){e(n).parent().parent().remove()}))}),300)}},{key:"edit_table_name",value:function(t){e(".gswpts_modal").hasClass("hidden")?(e(".gswpts_input_table_name").val(this.get_table_name(t)),e(".gswpts_modal").transition("fade up"),this.set_target_class(t)):(e(".gswpts_input_table_name").val(this.get_table_name(t)),this.set_target_class(t))}},{key:"get_table_name",value:function(t){return e(t.currentTarget).siblings("a").text()}},{key:"set_target_class",value:function(t){e(".table_name").removeClass("edit_tag"),e(t.currentTarget).siblings("a").addClass("edit_tag")}},{key:"edit_tag_value",value:function(t){var n=e(t.currentTarget).siblings("input").val();n!=e(".edit_tag").html()?this.updateCheck=!0:this.updateCheck=!1,e(".edit_tag").html(n),e(".edit_tag").attr("data-updated",""+this.updateCheck),e(t.currentTarget).parent().parent().transition("fade up"),console.log(this.updateCheck)}}])&&m(n.prototype,a),i}(t))})),jQuery(document).ready((function(e){new(function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(i,t);var n,a,r,o,s=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(r);if(o){var n=T(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function i(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=s.call(this,e)).table_settings=e(".tables_settings"),t.settings=e("#show_title, #rows_per_page, #info_block, #responsive, #show_entries, #swap_filter_inputs, #swap_bottom_options, #sorting, #search_table, #table_exporting"),t.events(),t}return n=i,(a=[{key:"events",value:function(){var e=this;this.table_settings.on("click",(function(t){e.change_btn_text(t)})),this.add_select_box_style(),this.settings.on("change",(function(t){e.update_table_by_changes(t)}))}},{key:"change_btn_text",value:function(t){var n=e(t.currentTarget).attr("data-btn-text"),a=e(t.currentTarget).attr("data-attr-text");e("#fetch_save_btn").html(n),e("#fetch_save_btn").attr("req-type",a)}},{key:"add_select_box_style",value:function(){e("#rows_per_page").dropdown(),e("#table_exporting").dropdown()}},{key:"update_table_by_changes",value:function(t){var n=this,a=e(".edit_table_name").siblings("input[name=table_name]").val();if("table_exporting"==e(t.currentTarget).attr("id")&&["json","pdf","csv","excel","print","copy"].forEach((function(e){n.button_reavealer(t,e)})),"search_table"==e(t.currentTarget).attr("id")&&e("#create_tables_filter").transition("scale"),"sorting"==e(t.currentTarget).attr("id")){var r=this.table_settings_obj();r.tableExport.forEach((function(e){setTimeout((function(){n.export_button_revealer_by_other_input(e)}),200)})),0==e(t.currentTarget).prop("checked")?(e("#create_tables").DataTable().destroy(),e("#create_tables").DataTable(this.table_object(a,r.defaultRowsPerPage,!1))):(e("#create_tables").DataTable().destroy(),e("#create_tables").DataTable(this.table_object(a,r.defaultRowsPerPage,!0)))}if("show_entries"==e(t.currentTarget).attr("id")&&e("#create_tables_length").transition("scale"),"info_block"==e(t.currentTarget).attr("id")&&e("#create_tables_info").transition("scale"),"swap_filter_inputs"==e(t.currentTarget).attr("id")&&(e(t.currentTarget).prop("checked")?(e("#filtering_input").css("flex-direction","row-reverse"),e("#create_tables_length").css({"margin-right":"0","margin-left":"auto"}),e("#create_tables_filter").css({"margin-left":"0","margin-right":"auto"})):(e("#filtering_input").css("flex-direction","row"),e("#create_tables_length").css({"margin-right":"auto","margin-left":"0"}),e("#create_tables_filter").css({"margin-left":"auto","margin-right":"0"}))),"swap_bottom_options"==e(t.currentTarget).attr("id")&&(e(t.currentTarget).prop("checked")?(e("#bottom_options").css("flex-direction","row-reverse"),e("#create_tables_info").css({"margin-right":"0","margin-left":"auto"}),e("#create_tables_paginate").css({"margin-left":"0","margin-right":"auto"})):(e("#bottom_options").css("flex-direction","row"),e("#create_tables_info").css({"margin-right":"auto","margin-left":"0"}),e("#create_tables_paginate").css({"margin-left":"auto","margin-right":"0"}))),"rows_per_page"==e(t.currentTarget).attr("id")){var o=this.table_settings_obj();o.tableExport.forEach((function(e){setTimeout((function(){n.export_button_revealer_by_other_input(e)}),200)})),"all"==e(t.currentTarget).val()?(e("#create_tables").DataTable().destroy(),e("#create_tables").DataTable(this.table_object(a,-1,o.allowSorting))):(e("#create_tables").DataTable().destroy(),e("#create_tables").DataTable(this.table_object(a,e(t.currentTarget).val(),o.allowSorting)))}}},{key:"button_reavealer",value:function(t,n){if(e(t.currentTarget).val().includes(n)){if(e("."+n+"_btn").hasClass("hidden"))return void e("."+n+"_btn").transition("scale")}else if(e("."+n+"_btn").hasClass("visible"))return void e("."+n+"_btn").transition("scale")}},{key:"export_button_revealer_by_other_input",value:function(t){e("."+t+"_btn").hasClass("hidden")&&e("."+t+"_btn").transition("scale")}},{key:"set_default",value:function(){var t=this.default_settings();e.each(this.settings,(function(n,a){"show_title"==e(a).attr("id")&&e(a).prop("checked",t.table_title),"responsive"==e(a).attr("id")&&e(a).prop("checked",t.responsiveTable),"search_table"==e(a).attr("id")&&e(a).prop("checked",t.searchBar),"show_entries"==e(a).attr("id")&&e(a).prop("checked",t.showXEntries),"info_block"==e(a).attr("id")&&e(a).prop("checked",t.showInfoBlock),"swap_filter_inputs"==e(a).attr("id")&&e(a).prop("checked",t.swapFilterInputs),"swap_bottom_options"==e(a).attr("id")&&e(a).prop("checked",t.swapBottomOptions)}))}}])&&S(n.prototype,a),i}(t))})),jQuery(document).ready((function(){$(".gswpts_loader").transition("fade"),setTimeout((function(){$(".dashboard_content, .manage_table_content, .create_table_content").transition("fade")}),300)}))}();
//# sourceMappingURL=admin.min.js.map
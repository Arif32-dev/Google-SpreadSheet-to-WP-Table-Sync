(()=>{var e={655:()=>{function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}jQuery(document).ready((function(t){new(function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.sheet_form=t("#gswpts_create_table"),this.sheet_container=t("#spreadsheet_container"),this.sheet_details=t("#sheet_details"),this.sheet_url="",this.events()}var a,s;return a=n,(s=[{key:"events",value:function(){var e=this;this.sheet_form.on("submit",(function(t){e.handle_submit(t)})),t(document).on("click","#sortcode_copy",(function(t){e.copy_shorcode(t)})),t(document).on("click","#create_button",(function(t){e.clear_fields()}))}},{key:"handle_submit",value:function(e){var n=this;e.preventDefault();var a=t(e.currentTarget).find("button"),s=t(e.currentTarget).find("input[name=table_name]"),r=t(e.currentTarget).serialize();this.sheet_url!=t(e.currentTarget).find("input[name=sheet_url]").val()?t.ajax({url:file_url.admin_ajax,data:{action:"gswpts_sheet_create",form_data:r,type:a.attr("req-type")},type:"post",beforeSend:function(){"fetch"==a.attr("req-type")?(n.btn_changer(a,'\n                            Fetching Data &nbsp;\n                            <div class="ui active mini inline loader"></div>\n                        ',"fetch"),n.sheet_container.html(n.html_loader)):("saved"==a.attr("req-type")&&t("#shortcode_container").transition("scale"),n.btn_changer(a,'\n                                Saving Table &nbsp;\n                                <div class="ui active mini inline loader"></div>\n                            ',"fetch"))},success:function(e){if(console.log(e),"invalid_action"!=JSON.parse(e).response_type&&"invalid_request"!=JSON.parse(e).response_type||(n.call_alert("Error &#128683;",JSON.parse(e).output,"error",4),n.btn_changer(a,"Fetch Data","fetch"),n.sheet_container.html("")),"empty_field"==JSON.parse(e).response_type&&(n.call_alert("Warning &#9888;&#65039;",JSON.parse(e).output,"warning",3),n.btn_changer(a,"Fetch Data","fetch"),n.sheet_container.html("")),"success"==JSON.parse(e).response_type&&(n.sheet_details.addClass("mt-5 p-3"),n.sheet_details.html(n.sheet_details_html(JSON.parse(e))),n.sheet_container.html(JSON.parse(e).output)),"saved"==JSON.parse(e).response_type){n.btn_changer(a,"Table Saved","saved"),n.call_alert("Successfull &#128077;",JSON.parse(e).output,"success",3);var t=Object.values(JSON.parse(e).id)[0];n.show_shortcode(t),n.sheet_url=JSON.parse(e).sheet_url,n.show_create_btn(),n.push_parameter(t)}"sheet_exists"==JSON.parse(e).response_type&&(n.call_alert("Warning &#9888;&#65039;",JSON.parse(e).output,"warning",3),n.btn_changer(a,"Save Table","save"))},complete:function(e){if("success"==JSON.parse(e.responseText).response_type){t("#create_tables").DataTable({order:[]}),n.btn_changer(a,"Save Table","save");var r=JSON.parse(e.responseText);""!=s.val()&&s.val()||s.val(r.sheet_data.sheet_name),setTimeout((function(){n.call_alert("Successfull &#128077;","<b>Google Sheet data fetched successfully</b>","success",3)}),700)}},error:function(e){n.call_alert("Error &#128683;","<b>Something went wrong</b>","error",3),n.btn_changer(a,"Fetch Data","fetch"),n.sheet_container.html("")}}):this.call_alert("Warning &#9888;&#65039;","<b>This SpreadSheet already exists. Try new one</b>","warning",3)}},{key:"btn_changer",value:function(e,t,n){e.html("\n                            ".concat(t,"\n                        ")),e.attr("req-type",n)}},{key:"call_alert",value:function(e,n,a,s){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bottom-right";t.suiAlert({title:e,description:n,type:a,time:s,position:r})}},{key:"html_loader",value:function(){return'\n                <div class="ui segment" style="width: 100%; min-height: 400px; margin-left: -18px;">\n                    <div class="ui active inverted dimmer">\n                        <div class="ui large text loader">Loading</div>\n                    </div>\n                    <p></p>\n                    <p></p>\n                    <p></p>\n                </div>\n            '}},{key:"sheet_details_html",value:function(e){return'\n                <div id="sheet_ui_card" class="ui card" style="width: 60%; min-width: 400px;">\n                    <div class="content">\n                        <div class="row">\n                            <div class="col-12 d-flex align-items-center justify-content-start mb-3">\n                                <h4 class="m-0">Sheet Name: </h4>\n                                <h5 class="m-0 ml-2">'.concat(e.sheet_data.sheet_name,'</h5>\n                            </div>\n                            <div class="col-12 d-flex align-items-center justify-content-start mb-3">\n                                <h4 class="m-0">Total Rows: </h4>\n                                <h5 class="m-0 ml-2">').concat(e.sheet_data.total_rows,'</h5>\n                            </div>\n                            <div class="col-12 d-flex align-items-center justify-content-start mb-3">\n                                <h4 class="m-0">Total Result: </h4>\n                                <h5 class="m-0 ml-2">').concat(e.sheet_data.sheet_total_result,'</h5>\n                            </div>\n                            <div class="col-12 d-flex align-items-center justify-content-start">\n                                <h4 class="m-0">Author Mail: </h4>\n                                <h5 class="m-0 ml-2">').concat(e.sheet_data.author_info[0].email.$t,'</h5>\n                            </div>\n                            <div id="shortcode_container" style="display: none !important;" class="col-12 d-flex mt-3 align-items-center justify-content-start transition hidden">\n                                <h4 class="m-0">Table Shortcode: </h4>\n                                <h5 class="m-0 ml-2">\n                                    <div class="ui action input">\n                                        <input id="sortcode_value" type="text" class="copyInput" value="">\n                                        <button id="sortcode_copy" type="button" name="copyToken" value="copy" class="copyToken ui right icon button">\n                                            <i class="clone icon"></i>\n                                        </button>\n                                    </div>\n                                </h5>\n                            </div>\n                        </div>\n                    </div>\n            </div>\n            ')}},{key:"show_shortcode",value:function(e){t("#shortcode_container").removeAttr("style"),t("#shortcode_container").transition("scale"),t("#sortcode_value").val("[gswpts_table id=".concat(e,"]"))}},{key:"copy_shorcode",value:function(e){var n=t(e.currentTarget).siblings("input");n.focus(),n.select(),document.execCommand("copy"),this.call_alert("Copied &#128077;","Sortcode copied successfully","info",2)}},{key:"show_create_btn",value:function(){t("#create_button_container").hasClass("mt-4")&&t("#create_button").hasClass("visible")||(t("#create_button_container").addClass("mt-4"),t("#create_button").transition("scale"))}},{key:"clear_fields",value:function(){this.sheet_form.find("input[name=sheet_url], input[name=table_name]").val(""),t("#sheet_ui_card").transition("scale"),t("#create_tables_wrapper").transition("scale"),this.btn_changer(this.sheet_form.find("button"),"Fetch Data","fetch"),this.sheet_url="",setTimeout((function(){t("#sheet_ui_card").remove(),t("#create_tables_wrapper").remove()}),300)}},{key:"push_parameter",value:function(e){var t=new URL(window.location);t.searchParams.set("id",e),window.history.pushState({},"",t)}}])&&e(a.prototype,s),n}())}))},209:()=>{function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}jQuery(document).ready((function(t){new(function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.mange_tables=t("#manage_tables"),this.create_table=t("#create_tables"),this.events()}var a,s;return a=n,(s=[{key:"events",value:function(){this.show_manage_tables()}},{key:"show_manage_tables",value:function(){this.mange_tables.DataTable({columnDefs:[{targets:0,orderable:!1}],order:[[1,"asc"]]}),this.create_table.DataTable({order:[]})}}])&&e(a.prototype,s),n}())}))},282:()=>{function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}jQuery(document).ready((function(t){new(function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.events()}var a,s;return a=n,(s=[{key:"events",value:function(){this.fetch_data_by_id()}},{key:"fetch_data_by_id",value:function(){this.get_id_parameter()?t.ajax({url:file_url.admin_ajax,data:{action:"gswpts_sheet_fetch",id:this.get_id_parameter()},type:"post",success:function(e){console.log(e)},error:function(e){}}):console.log(this.get_id_parameter())}},{key:"get_id_parameter",value:function(){var e=new URL(window.location);return new URLSearchParams(e.search).get("id")||!1}}])&&e(a.prototype,s),n}())}))}},t={};function n(a){if(t[a])return t[a].exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(209),n(655),n(282),jQuery(document).ready((function(){$(".gswpts_main_loader").transition("scale"),$(".gswpts_content_container").transition("scale")}))})()})();
//# sourceMappingURL=admin.min.js.map